<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Kinh Doanh - 3 M·∫£ng</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <style>
    :root {
      --bg: #0a0f1a;
      --bg-soft: #111827;
      --bg-card: #0d1525;
      --border-subtle: #1e293b;
      --accent-mnr: #f97316;
      --accent-qlr: #38bdf8;
      --accent-kt: #a78bfa;
      --text-main: #e5e7eb;
      --text-sub: #9ca3af;
      --danger: #f97373;
      --warning: #facc15;
      --success: #4ade80;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
      color: #1f2937;
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 100%;
      max-width: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    /* HEADER */
    .header {
      background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
      color: white;
      padding: 25px 30px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header img {
      height: 60px;
      width: auto;
    }

    .title-block h1 {
      font-size: 32px;
      font-weight: 700;
      margin: 0;
      color: white;
    }

    .title-block p {
      font-size: 14px;
      opacity: 0.9;
      margin-top: 4px;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .filter-pill {
      background: #dbeafe;
      border: 1px solid #93c5fd;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 0.82rem;
      color: #1e40af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .filter-pill span {
      font-weight: 600;
      color: #1e40af;
    }

    .filter-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #2563eb;
    }

    /* MAIN LAYOUT */
    .main-wrapper {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    /* NAVIGATION SIDEBAR */
    .nav-container {
      background: #1a2744;
      border-right: 1px solid rgba(255, 255, 255, 0.1);
      width: 220px;
      display: flex;
      flex-direction: column;
      gap: 0;
      padding: 0;
      overflow-y: auto;
      flex-shrink: 0;
      color: white;
    }

    .nav-section-title {
      padding: 10px 12px 8px;
      font-size: 16px;
      font-weight: 700;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .nav-section-title img {
      height: 45px;
      width: auto;
      margin: 0;
    }

    .nav-item {
      padding: 14px 20px;
      font-size: 14px;
      font-weight: 600;
      color: #cbd5e1;
      cursor: pointer;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
      background: transparent;
      border: none;
      width: 100%;
      text-align: left;
      display: flex;
      align-items: center;
      gap: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .nav-item:hover {
      background: rgba(255, 255, 255, 0.05);
      color: #e0f2fe;
    }

    .nav-item.active {
      color: white;
      background: #2563eb;
      border-left-color: #0ea5e9;
    }

    .nav-footer {
      margin-top: auto;
      padding: 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 11px;
      color: #9ca3af;
      text-align: center;
    }

    .help-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 13px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      transition: all 0.3s ease;
      margin-top: 12px;
      font-weight: 600;
      width: 100%;
    }

    .help-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.6);
    }

    /* CONTENT WRAPPER */
    .content-wrapper {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
    }

    .content-inner {
      max-width: 1600px;
      margin: 0 auto;
    }

    /* TAB CONTENT */
    .tab-content {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* MAIN CARD */
    .main-card {
      background: white;
      border-radius: 20px;
      border: 1px solid #e5e7eb;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    /* KPI GRID */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 14px;
      margin-bottom: 20px;
    }

    .kpi-card {
      background: white;
      border-radius: 14px;
      padding: 16px;
      border: 1px solid #e5e7eb;
      position: relative;
      overflow: hidden;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .kpi-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    }

    .kpi-card.mnr { border-left: 3px solid var(--accent-mnr); }
    .kpi-card.qlr { border-left: 3px solid var(--accent-qlr); }
    .kpi-card.kt { border-left: 3px solid var(--accent-kt); }

    .kpi-label {
      font-size: 0.72rem;
      text-transform: uppercase;
      color: #6b7280;
      letter-spacing: 0.05em;
      margin-bottom: 8px;
    }

    .kpi-value {
      font-size: 1.6rem;
      font-weight: 700;
      color: #1f2937;
    }

    .kpi-value.mnr { color: var(--accent-mnr); }
    .kpi-value.qlr { color: var(--accent-qlr); }
    .kpi-value.kt { color: var(--accent-kt); }

    .kpi-sub {
      font-size: 0.78rem;
      color: #6b7280;
      margin-top: 4px;
    }

    .kpi-chip {
      position: absolute;
      top: 12px;
      right: 12px;
      font-size: 0.68rem;
      padding: 4px 10px;
      border-radius: 999px;
      font-weight: 500;
    }

    .kpi-chip.success {
      background: rgba(34, 197, 94, 0.15);
      color: var(--success);
    }

    .kpi-chip.warning {
      background: rgba(234, 179, 8, 0.15);
      color: var(--warning);
    }

    .kpi-chip.danger {
      background: rgba(239, 68, 68, 0.15);
      color: var(--danger);
    }

    /* SECTION ROW */
    .section-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 16px;
      margin-bottom: 16px;
    }

    .card {
      background: white;
      border-radius: 14px;
      border: 1px solid #e5e7eb;
      padding: 16px;
      min-height: 300px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #1f2937;
    }

    .card-title.mnr { color: var(--accent-mnr); }
    .card-title.qlr { color: var(--accent-qlr); }
    .card-title.kt { color: var(--accent-kt); }

    .badge {
      font-size: 0.72rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      color: var(--text-sub);
    }

    .chart-container {
      width: 100%;
      height: 250px;
    }

    /* TABLES */
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
    }

    thead {
      background: #f9fafb;
    }

    th, td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }

    th {
      font-weight: 600;
      color: #1f2937;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    tbody tr:hover {
      background: #f9fafb;
    }

    .status-badge {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    .status-badge.good {
      background: rgba(34, 197, 94, 0.15);
      color: var(--success);
    }

    .status-badge.warning {
      background: rgba(234, 179, 8, 0.15);
      color: var(--warning);
    }

    .status-badge.bad {
      background: rgba(239, 68, 68, 0.15);
      color: var(--danger);
    }

    /* PROGRESS BAR */
    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(148, 163, 184, 0.2);
      border-radius: 999px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 999px;
      transition: width 0.5s ease;
    }

    .progress-fill.mnr { background: linear-gradient(90deg, rgba(249, 115, 22, 0.3), var(--accent-mnr)); }
    .progress-fill.qlr { background: linear-gradient(90deg, rgba(56, 189, 248, 0.3), var(--accent-qlr)); }
    .progress-fill.kt { background: linear-gradient(90deg, rgba(167, 139, 250, 0.3), var(--accent-kt)); }

    /* OVERVIEW SUMMARY */
    .overview-summary {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }

    .summary-block {
      background: radial-gradient(circle at top left, #1e293b, #0d1525);
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(148, 163, 184, 0.12);
      text-align: center;
    }

    .summary-block.mnr { border-top: 4px solid var(--accent-mnr); }
    .summary-block.qlr { border-top: 4px solid var(--accent-qlr); }
    .summary-block.kt { border-top: 4px solid var(--accent-kt); }

    .summary-icon {
      font-size: 2.5rem;
      margin-bottom: 12px;
    }

    .summary-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .summary-value {
      font-size: 2rem;
      font-weight: 700;
    }

    .summary-sub {
      font-size: 0.8rem;
      color: var(--text-sub);
      margin-top: 4px;
    }

    /* ALERTS */
    .alerts-section {
      margin-top: 20px;
    }

    .alert-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 10px;
      margin-bottom: 8px;
    }

    /* KT SUB-TABS */
    .kt-subtab-btn {
      transition: all 0.3s ease;
    }

    .kt-subtab-btn:hover {
      opacity: 0.8;
      transform: translateY(-2px);
    }

    .kt-subtab-btn.active {
      background: rgba(167, 139, 250, 0.2) !important;
      border: 1px solid var(--accent-kt) !important;
      color: var(--accent-kt) !important;
    }

    .kt-subtab-content {
      display: none;
    }

    .kt-subtab-content.active {
      display: block;
    }

    .alert-item.warning {
      background: rgba(234, 179, 8, 0.1);
      border-color: rgba(234, 179, 8, 0.3);
    }

    .alert-icon {
      font-size: 1.2rem;
    }

    .alert-text {
      flex: 1;
      font-size: 0.85rem;
    }

    .alert-time {
      font-size: 0.75rem;
      color: var(--text-sub);
    }

    @media (max-width: 1200px) {
      .overview-summary {
        grid-template-columns: 1fr;
      }
      .section-row {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .tabs-nav {
        flex-wrap: wrap;
        width: 100%;
      }
      .tab-btn {
        flex: 1;
        justify-content: center;
        padding: 10px 16px;
      }
      .header {
        flex-direction: column;
      }
      .filters {
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- MAIN LAYOUT -->
    <div class="main-wrapper">
      <!-- NAVIGATION SIDEBAR -->
      <div class="nav-container">
        <div class="nav-section-title">
          <img src="t·∫£i xu·ªëng.png" alt="TPP Logo">
          B√°o C√°o Kinh Doanh
        </div>
        
        <button class="nav-item active" data-page="overview" onclick="showPage('overview')">
          üìà T·ªïng quan
        </button>
        
        <!-- Section: Hi·ªáu qu·∫£ kinh doanh -->
        <div style="padding: 10px 16px 6px; font-size: 11px; font-weight: 700; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.5px;">
          Hi·ªáu qu·∫£ kinh doanh
        </div>
        <button class="nav-item" data-page="mnr" onclick="showPage('mnr')">
          üîß MnR
        </button>
        <button class="nav-item" data-page="qlr" onclick="showPage('qlr')">
          üì¶ Qu·∫£n l√Ω R·ªóng
        </button>
        <button class="nav-item" data-page="kt" onclick="showPage('kt')">
          ‚öì Khai th√°c
        </button>
        
        <!-- Section: Kh√°ch h√†ng -->
        <div style="padding: 10px 16px 6px; font-size: 11px; font-weight: 700; color: #9ca3af; text-transform: uppercase; letter-spacing: 0.5px;">
          Kh√°ch h√†ng
        </div>
        <button class="nav-item" data-page="customer" onclick="showPage('customer')">
          üë• Qu·∫£n l√Ω Kh√°ch h√†ng
        </button>

        <div class="nav-footer">
          <span style="font-size: 11px; color: #9ca3af; display: block; margin-bottom: 8px;">C·∫≠p nh·∫≠t: 05/01/2026</span>
        </div>
      </div>

      <!-- CONTENT WRAPPER -->
      <div class="content-wrapper">
        <div class="content-inner">
          
    <!-- ==================== TAB: T·ªîNG QUAN ==================== -->
    <div class="tab-content active" id="tab-overview">
      <div class="main-card">
        <!-- Page Title & Filters -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid #e5e7eb;">
          <h2 style="font-size: 1.5rem; font-weight: 700; color: #1f2937; margin: 0;">üìä T·ªïng Quan T√¨nh H√¨nh Kinh Doanh</h2>
          <div style="display: flex; gap: 8px;">
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Th√°ng: 01/2026</option>
              <option>Th√°ng: 12/2025</option>
              <option>Th√°ng: 11/2025</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Chi nh√°nh: T·∫•t c·∫£</option>
              <option>Chi nh√°nh: TP.HCM</option>
              <option>Chi nh√°nh: H√† N·ªôi</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>H√£ng t√†u: ALL</option>
              <option>H√£ng t√†u: Maersk</option>
              <option>H√£ng t√†u: MSC</option>
            </select>
          </div>
        </div>

        <!-- Overview Summary -->
        <div class="overview-summary">
          <div class="summary-block mnr">
            <div class="summary-icon">üîß</div>
            <div class="summary-title">M·∫£ng MnR</div>
            <div class="summary-value" style="color: var(--accent-mnr);">2.45 t·ª∑</div>
            <div class="summary-sub">Doanh thu th√°ng | +12% vs c√πng k·ª≥</div>
            <div style="margin-top: 12px;">
              <div class="progress-bar">
                <div class="progress-fill mnr" style="width: 78%;"></div>
              </div>
              <div style="font-size: 0.75rem; color: var(--text-sub); margin-top: 4px;">78% KPI</div>
            </div>
          </div>
          <div class="summary-block qlr">
            <div class="summary-icon">üì¶</div>
            <div class="summary-title">M·∫£ng Qu·∫£n l√Ω R·ªóng</div>
            <div class="summary-value" style="color: var(--accent-qlr);">8,450 cont</div>
            <div class="summary-sub">T·ªïng xu·∫•t/nh·∫≠p th√°ng | +5% vs c√πng k·ª≥</div>
            <div style="margin-top: 12px;">
              <div class="progress-bar">
                <div class="progress-fill qlr" style="width: 92%;"></div>
              </div>
              <div style="font-size: 0.75rem; color: var(--text-sub); margin-top: 4px;">92% KPI</div>
            </div>
          </div>
          <div class="summary-block kt">
            <div class="summary-icon">‚öì</div>
            <div class="summary-title">M·∫£ng Khai th√°c</div>
            <div class="summary-value" style="color: var(--accent-kt);">156 chuy·∫øn</div>
            <div class="summary-sub">S√† lan v·∫≠n h√†nh | +8% vs c√πng k·ª≥</div>
            <div style="margin-top: 12px;">
              <div class="progress-bar">
                <div class="progress-fill kt" style="width: 85%;"></div>
              </div>
              <div style="font-size: 0.75rem; color: var(--text-sub); margin-top: 4px;">85% KPI</div>
            </div>
          </div>
        </div>

        <!-- Charts Row -->
        <div class="section-row">
          <div class="card">
            <div class="card-header">
              <div class="card-title">Doanh thu theo m·∫£ng</div>
              <div class="badge">Th√°ng 01/2026</div>
            </div>
            <div class="chart-container" id="chart-revenue-overview"></div>
          </div>
          <div class="card">
            <div class="card-header">
              <div class="card-title">So s√°nh KPI 3 m·∫£ng</div>
              <div class="badge">Target vs Actual</div>
            </div>
            <div class="chart-container" id="chart-kpi-comparison"></div>
          </div>
        </div>

        <!-- Alerts Section -->
        <div class="alerts-section">
          <h3 style="font-size: 0.9rem; margin-bottom: 12px; color: var(--text-sub);">‚ö†Ô∏è C·∫£nh b√°o & Th√¥ng b√°o</h3>
          <div class="alert-item">
            <span class="alert-icon">üîß</span>
            <span class="alert-text"><strong>MnR:</strong> 12 cont s·ª≠a ch·ªØa qu√° h·∫°n > 7 ng√†y c·∫ßn x·ª≠ l√Ω</span>
            <span class="alert-time">2 gi·ªù tr∆∞·ªõc</span>
          </div>
          <div class="alert-item warning">
            <span class="alert-icon">üì¶</span>
            <span class="alert-text"><strong>QLR:</strong> B√£i A ƒë·∫°t 95% c√¥ng su·∫•t, c·∫ßn ƒëi·ªÅu ph·ªëi</span>
            <span class="alert-time">30 ph√∫t tr∆∞·ªõc</span>
          </div>
          <div class="alert-item warning">
            <span class="alert-icon">‚öì</span>
            <span class="alert-text"><strong>Khai th√°c:</strong> S√† lan SL-05 delay 2 ti·∫øng do th·ªùi ti·∫øt</span>
            <span class="alert-time">1 gi·ªù tr∆∞·ªõc</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== TAB: MnR ==================== -->
    <div class="tab-content" id="tab-mnr">
      <div class="main-card">
        <!-- Page Title & Filters -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid #e5e7eb;">
          <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--accent-mnr); margin: 0;">üîß B√°o C√°o Ph√≤ng MnR</h2>
          <div style="display: flex; gap: 8px;">
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Th·ªùi gian: Th√°ng 01/2026</option>
              <option>Th·ªùi gian: Th√°ng 12/2025</option>
              <option>Th·ªùi gian: Th√°ng 11/2025</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Kh√°ch h√†ng: All</option>
              <option>Kh√°ch h√†ng: Maersk</option>
              <option>Kh√°ch h√†ng: MSC</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>M·∫£ng kinh doanh: All</option>
              <option>M·∫£ng kinh doanh: N·ªôi ƒë·ªãa</option>
              <option>M·∫£ng kinh doanh: Qu·ªëc t·∫ø</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Lo·∫°i chi ph√≠: All</option>
              <option>Lo·∫°i chi ph√≠: Nh√¢n c√¥ng</option>
              <option>Lo·∫°i chi ph√≠: V·∫≠t t∆∞</option>
            </select>
          </div>
        </div>

        <!-- KPI Cards - 3 vertical on left -->
        <div style="display: grid; grid-template-columns: 200px 1fr 1fr; gap: 16px; margin-bottom: 16px;">
          <!-- Left KPI column -->
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <div class="kpi-card mnr" style="min-height: auto; padding: 12px;">
              <span class="kpi-chip success">+7% ‚ñ≤</span>
              <div class="kpi-label">Doanh thu</div>
              <div class="kpi-value mnr">5,7 t·ª∑</div>
              <div class="kpi-sub">vs prev: 5.9 t·ª∑</div>
              <div class="progress-bar" style="margin-top: 6px;">
                <div class="progress-fill mnr" style="width: 85%;"></div>
              </div>
            </div>
            <div class="kpi-card mnr" style="min-height: auto; padding: 12px;">
              <span class="kpi-chip danger">-4% ‚ñº</span>
              <div class="kpi-label">Chi ph√≠</div>
              <div class="kpi-value mnr">1,8 t·ª∑</div>
              <div class="kpi-sub">vs prev: 2.2 t·ª∑</div>
              <div class="progress-bar" style="margin-top: 6px;">
                <div class="progress-fill mnr" style="width: 60%;"></div>
              </div>
            </div>
            <div class="kpi-card mnr" style="min-height: auto; padding: 12px;">
              <span class="kpi-chip success">+7% ‚ñ≤</span>
              <div class="kpi-label">L·ª£i nhu·∫≠n</div>
              <div class="kpi-value mnr">3,9 t·ª∑</div>
              <div class="kpi-sub">Margin: 68%</div>
              <div class="progress-bar" style="margin-top: 6px;">
                <div class="progress-fill mnr" style="width: 75%;"></div>
              </div>
            </div>
          </div>

          <!-- Center: Doanh thu - S·ªë l∆∞·ª£ng - Chi ph√≠ theo th·ªùi gian -->
          <div class="card" style="min-height: 280px;">
            <div class="card-header">
              <div>
                <div class="card-title mnr">Doanh thu - S·ªë l∆∞·ª£ng - Chi ph√≠ theo th·ªùi gian</div>
              </div>
              <div style="display: flex; gap: 12px; font-size: 0.72rem;">
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 12px; height: 3px; background: #4ade80; border-radius: 2px;"></span> L·ª£i nhu·∫≠n</span>
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 12px; height: 12px; background: #60a5fa; border-radius: 2px;"></span> Doanh thu</span>
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 12px; height: 12px; background: #facc15; border-radius: 2px;"></span> Chi ph√≠</span>
              </div>
            </div>
            <div class="chart-container" id="chart-mnr-revenue-time" style="height: 220px;"></div>
          </div>

          <!-- Right: Ph√¢n nh√≥m doanh thu (Pie chart) -->
          <div class="card" style="min-height: 280px;">
            <div class="card-header">
              <div>
                <div class="card-title mnr">Ph√¢n nh√≥m doanh thu</div>
              </div>
            </div>
            <div class="chart-container" id="chart-mnr-pie" style="height: 220px;"></div>
          </div>
        </div>

        <!-- ROW 2: S·ªë Cont ƒë√£ s·ª≠a + T·ªìn cont ch∆∞a s·ª≠a + S·ªë l∆∞·ª£ng cont theo tr·∫°ng th√°i -->
        <div class="section-row" style="grid-template-columns: 1fr 1fr 1fr; margin-bottom: 16px;">
          <!-- S·ªë Cont ƒë√£ s·ª≠a v√† t·ª∑ l·ªá ho√†n th√†nh -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title mnr">S·ªë Cont ƒë√£ s·ª≠a v√† t·ª∑ l·ªá ho√†n th√†nh</div>
              </div>
            </div>
            <div style="display: flex; align-items: center; gap: 16px; padding: 12px 0;">
              <div class="chart-container" id="chart-mnr-gauge" style="width: 120px; height: 120px;"></div>
              <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="font-size: 2rem; font-weight: 700; color: var(--accent-mnr);">4K</div>
                <div style="font-size: 0.75rem; color: var(--text-sub);">Target: 6K</div>
                <div style="display: flex; gap: 8px; font-size: 0.72rem;">
                  <span style="color: var(--text-sub);">2%</span>
                  <span style="color: var(--warning);">7K</span>
                </div>
              </div>
            </div>
          </div>

          <!-- T·ªìn cont ch∆∞a s·ª≠a theo th·ªùi gian -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title mnr">T·ªìn cont ch∆∞a s·ª≠a theo th·ªùi gian</div>
              </div>
            </div>
            <div class="chart-container" id="chart-mnr-pending" style="height: 150px;"></div>
          </div>

          <!-- S·ªë l∆∞·ª£ng cont ch∆∞a s·ª≠a theo tr·∫°ng th√°i -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title mnr">S·ªë l∆∞·ª£ng cont ch∆∞a s·ª≠a theo tr·∫°ng th√°i</div>
              </div>
            </div>
            <div style="display: flex; flex-direction: column; gap: 8px; padding: 8px 0;">
              <div style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 0.75rem; color: var(--text-sub); width: 80px;">Trong th·ªùi h·∫°n</span>
                <div class="progress-bar" style="flex: 1;">
                  <div class="progress-fill mnr" style="width: 65%; background: linear-gradient(90deg, rgba(74,222,128,0.3), #4ade80);"></div>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 0.75rem; color: var(--text-sub); width: 80px;">G·∫ßn ƒë·∫øn h·∫°n</span>
                <div class="progress-bar" style="flex: 1;">
                  <div class="progress-fill" style="width: 25%; background: linear-gradient(90deg, rgba(250,204,21,0.3), #facc15);"></div>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 0.75rem; color: var(--danger); width: 80px;">Qu√° h·∫°n</span>
                <div class="progress-bar" style="flex: 1;">
                  <div class="progress-fill" style="width: 10%; background: linear-gradient(90deg, rgba(239,68,68,0.3), #f97373);"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ROW 3: T·ªïng s·ªë l∆∞·ª£ng t·ªìn + Chi ti·∫øt v·∫≠t t∆∞ t·ªìn kho -->
        <div class="section-row" style="grid-template-columns: 1fr 1.2fr; margin-bottom: 16px;">
          <!-- T·ªïng s·ªë l∆∞·ª£ng t·ªìn v√† gi√° tr·ªã t·ªìn theo th·ªùi gian -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title mnr">T·ªïng s·ªë l∆∞·ª£ng t·ªìn v√† gi√° tr·ªã t·ªìn theo th·ªùi gian</div>
              </div>
            </div>
            <div class="chart-container" id="chart-mnr-inventory" style="height: 200px;"></div>
          </div>

          <!-- Chi ti·∫øt v·∫≠t t∆∞ t·ªìn kho -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title mnr">Chi ti·∫øt v·∫≠t t∆∞ t·ªìn kho</div>
              </div>
            </div>
            <table>
              <thead>
                <tr>
                  <th>Lo·∫°i v·∫≠t t∆∞</th>
                  <th>ƒê∆°n v·ªã</th>
                  <th>S·ªë l∆∞·ª£ng</th>
                  <th>Gi√° tr·ªã</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Th√©p</td>
                  <td>T·∫•n</td>
                  <td>20</td>
                  <td>400tr</td>
                </tr>
                <tr>
                  <td>Xi mƒÉng</td>
                  <td>T·∫•n</td>
                  <td>5</td>
                  <td>100tr</td>
                </tr>
                <tr>
                  <td>S·∫Øt</td>
                  <td>data</td>
                  <td>data</td>
                  <td>data</td>
                </tr>
                <tr>
                  <td>D·∫ßu</td>
                  <td>data</td>
                  <td>data</td>
                  <td>data</td>
                </tr>
                <tr>
                  <td>...</td>
                  <td>data</td>
                  <td>data</td>
                  <td>data</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== TAB: QU·∫¢N L√ù R·ªñNG ==================== -->
    <div class="tab-content" id="tab-qlr">
      <div class="main-card">
        <!-- Page Title & Filters -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid #e5e7eb;">
          <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--accent-qlr); margin: 0;">üì¶ B√°o C√°o Ph√≤ng Qu·∫£n L√Ω R·ªóng</h2>
          <div style="display: flex; gap: 8px;">
            <input type="date" value="2026-01-05" class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Ca: Ca 2 (14:00‚Äì22:00)</option>
              <option>Ca: Ca 1 (06:00‚Äì14:00)</option>
              <option>Ca: Ca 3 (22:00‚Äì06:00)</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>H√£ng t√†u: ALL</option>
              <option>H√£ng t√†u: Maersk</option>
              <option>H√£ng t√†u: MSC</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Size: 20' ¬∑ 40'</option>
              <option>Size: 20'</option>
              <option>Size: 40'</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>PT c∆° gi·ªõi: All</option>
              <option>PT c∆° gi·ªõi: Xe n√¢ng</option>
              <option>PT c∆° gi·ªõi: Reach stacker</option>
            </select>
          </div>
        </div>

        <!-- KPI Grid - 7 columns like original -->
        <div class="kpi-grid" style="grid-template-columns: repeat(7, minmax(140px, 1fr));">
          <div class="kpi-card qlr">
            <span class="kpi-chip success">+8% vs ca tr∆∞·ªõc</span>
            <div class="kpi-label">T·ªïng nh·∫≠p</div>
            <div class="kpi-value qlr">328 cont</div>
            <div class="kpi-sub">Cont r·ªóng v√†o b√£i trong ca</div>
            <div id="qlr-spark-1" style="width:100%;height:36px;margin-top:8px;"></div>
          </div>
          <div class="kpi-card qlr">
            <span class="kpi-chip warning">-5% vs ca tr∆∞·ªõc</span>
            <div class="kpi-label">T·ªïng xu·∫•t</div>
            <div class="kpi-value qlr">291 cont</div>
            <div class="kpi-sub">C·∫•p cho ƒë·∫ßu k√©o / s√† lan</div>
            <div id="qlr-spark-2" style="width:100%;height:36px;margin-top:8px;"></div>
          </div>
          <div class="kpi-card qlr">
            <span class="kpi-chip danger">G·∫ßn ƒë·∫ßy</span>
            <div class="kpi-label">T·ªìn b√£i cu·ªëi ca</div>
            <div class="kpi-value qlr">2.180 cont</div>
            <div class="kpi-sub">T·ªïng cont r·ªóng tr√™n b√£i</div>
            <div id="qlr-spark-3" style="width:100%;height:36px;margin-top:8px;"></div>
          </div>
          <div class="kpi-card qlr">
            <span class="kpi-chip danger">92% s·ª≠ d·ª•ng</span>
            <div class="kpi-label">% c√¥ng su·∫•t b√£i</div>
            <div class="kpi-value qlr">92%</div>
            <div class="progress-bar" style="margin: 8px 0;">
              <div class="progress-fill qlr" style="width: 92%; background: linear-gradient(90deg, rgba(239,68,68,0.3), var(--danger));"></div>
            </div>
            <div class="kpi-sub">Ng∆∞·ª°ng c·∫£nh b√°o: > 85%</div>
          </div>
          <div class="kpi-card qlr">
            <span class="kpi-chip">3 chuy·∫øn</span>
            <div class="kpi-label">Th·ªùi gian ph·ª•c v·ª• s√† lan</div>
            <div class="kpi-value qlr">5 gi·ªù 40'</div>
            <div class="kpi-sub">T·ªïng th·ªùi gian x·ª≠ l√Ω s√† lan r·ªóng</div>
            <div id="qlr-spark-4" style="width:100%;height:36px;margin-top:8px;"></div>
          </div>
          <div class="kpi-card qlr">
            <span class="kpi-chip danger">Chi ph√≠ ti·ªÅm ·∫©n</span>
            <div class="kpi-label">ƒê·∫£o chuy·ªÉn</div>
            <div class="kpi-value qlr">164 cont</div>
            <div class="kpi-sub">D·ªçn t·∫ßng, tr·∫£i b√£i, ƒë·∫£o v·ªã tr√≠</div>
            <div id="qlr-spark-5" style="width:100%;height:36px;margin-top:8px;"></div>
          </div>
          <div class="kpi-card qlr">
            <span class="kpi-chip">5/6 thi·∫øt b·ªã</span>
            <div class="kpi-label">PT c∆° gi·ªõi ho·∫°t ƒë·ªông</div>
            <div class="kpi-value qlr">5 thi·∫øt b·ªã</div>
            <div class="kpi-sub">RS, FL, RTG ph·ª•c v·ª• b√£i r·ªóng</div>
            <div id="qlr-spark-6" style="width:100%;height:36px;margin-top:8px;"></div>
          </div>
        </div>

        <!-- ROW 1: NH·∫¨P/XU·∫§T + T·ªíN B√ÉI -->
        <div class="section-row" style="grid-template-columns: 1.4fr 1.2fr 1.1fr;">
          <!-- Nh·∫≠p xu·∫•t theo gi·ªù -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title qlr">Nh·∫≠p / Xu·∫•t r·ªóng theo gi·ªù</div>
                <div style="font-size: 0.72rem; color: var(--text-sub);">Ph√¢n b·ªï s·∫£n l∆∞·ª£ng trong ca</div>
              </div>
              <div class="badge">Bi·ªÉu ƒë·ªì c·ªôt / line</div>
            </div>
            <div class="chart-container" id="chart-qlr-inout-hour" style="height: 280px;"></div>
          </div>

          <!-- Heatmap t·ªìn b√£i -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title qlr">T·ªìn b√£i theo block</div>
                <div style="font-size: 0.72rem; color: var(--text-sub);">Heatmap c√¥ng su·∫•t b√£i r·ªóng</div>
              </div>
              <div class="badge">Heatmap</div>
            </div>
            <div class="chart-container" id="chart-qlr-heatmap" style="height: 280px;"></div>
          </div>

          <!-- T·ªìn b√£i theo h√£ng t√†u -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title qlr">T·ªìn b√£i theo h√£ng t√†u</div>
                <div style="font-size: 0.72rem; color: var(--text-sub);">Top h√£ng t√†u chi·∫øm di·ªán t√≠ch</div>
              </div>
            </div>
            <div class="chart-container" id="chart-qlr-carrier" style="height: 280px;"></div>
          </div>
        </div>

        <!-- ROW 2: S√Ä LAN + ƒê·∫¶U K√âO + HOUSEKEEPING -->
        <div class="section-row" style="grid-template-columns: 1.4fr 1.2fr 1.1fr;">
          <!-- S√† lan r·ªóng -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title qlr">S√† lan nh·∫≠p r·ªóng</div>
                <div style="font-size: 0.72rem; color: var(--text-sub);">S·∫£n l∆∞·ª£ng & th·ªùi gian ph·ª•c v·ª• t·ª´ng chuy·∫øn</div>
              </div>
              <div class="badge">S√† lan</div>
            </div>
            <div class="chart-container" id="chart-qlr-barge" style="height: 200px;"></div>
          </div>

          <!-- ƒê·∫ßu k√©o - xu·∫•t r·ªóng -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title qlr">ƒê·∫ßu k√©o ‚Äì Xu·∫•t r·ªóng</div>
                <div style="font-size: 0.72rem; color: var(--text-sub);">Xe ch·ªù, cont c·∫•p, hi·ªáu su·∫•t ph·ª•c v·ª•</div>
              </div>
              <div class="badge">C·ªïng b√£i</div>
            </div>
            <div class="chart-container" id="chart-qlr-tractor" style="height: 200px;"></div>
          </div>

          <!-- Housekeeping / ƒê·∫£o chuy·ªÉn -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title qlr">ƒê·∫£o chuy·ªÉn / Housekeeping</div>
                <div style="font-size: 0.72rem; color: var(--text-sub);">D·ªçn b√£i, tr·∫£i b√£i, chi ph√≠ re-handling</div>
              </div>
              <div class="badge">Chi ph√≠ thao t√°c</div>
            </div>
            <div class="chart-container" id="chart-qlr-rehandling" style="height: 140px;"></div>
            <table style="margin-top: 8px;">
              <thead>
                <tr>
                  <th>Lo·∫°i thao t√°c</th>
                  <th>S·∫£n l∆∞·ª£ng</th>
                  <th>Ghi ch√∫</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>D·ªçn t·∫ßng</td>
                  <td>68 cont</td>
                  <td>Chu·∫©n b·ªã cho t√†u s√°ng h√¥m sau</td>
                </tr>
                <tr>
                  <td>Tr·∫£i b√£i</td>
                  <td>54 cont</td>
                  <td>Block Y3 m·ªü th√™m t·∫ßng</td>
                </tr>
                <tr>
                  <td>ƒê·∫£o v·ªã tr√≠</td>
                  <td>42 cont</td>
                  <td>Do y√™u c·∫ßu x·∫øp l·∫°i theo h√£ng</td>
                </tr>
              </tbody>
            </table>
            <div style="display: flex; flex-wrap: wrap; gap: 4px; font-size: 0.7rem; margin-top: 8px;">
              <span style="padding: 3px 8px; border-radius: 999px; border: 1px solid rgba(248, 113, 113, 0.7); color: var(--danger);">Re-handling cao t·∫°i Y2</span>
              <span style="padding: 3px 8px; border-radius: 999px; border: 1px solid rgba(148, 163, 184, 0.35); color: var(--text-sub);">G·ª£i √Ω xem l·∫°i quy ho·∫°ch h√£ng t√†u</span>
            </div>
          </div>
        </div>

        <!-- ROW 3: PH∆Ø∆†NG TI·ªÜN C∆† GI·ªöI -->
        <div class="card" style="display: flex; flex-direction: row; gap: 16px; margin-top: 16px;">
          <div style="flex: 1;">
            <div class="card-header">
              <div>
                <div class="card-title qlr">Ph∆∞∆°ng ti·ªán c∆° gi·ªõi</div>
                <div style="font-size: 0.72rem; color: var(--text-sub);">S·ª≠ d·ª•ng thi·∫øt b·ªã trong ca</div>
              </div>
              <div class="badge">Equipment usage</div>
            </div>
            <div class="chart-container" id="chart-qlr-equipment" style="height: 250px;"></div>
          </div>
          <div style="flex: 1; display: flex; flex-direction: column;">
            <div style="border-radius: 10px; border: 1px solid rgba(148, 163, 184, 0.35); padding: 12px; flex: 1;">
              <table>
                <thead>
                  <tr>
                    <th>Thi·∫øt b·ªã</th>
                    <th>Gi·ªù ho·∫°t ƒë·ªông</th>
                    <th>L∆∞·ª£t n√¢ng/h·∫°</th>
                    <th>Tr·∫°ng th√°i</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>RS-01</td>
                    <td>5.2 h</td>
                    <td>168</td>
                    <td><span class="status-badge good">OK</span></td>
                  </tr>
                  <tr>
                    <td>RS-02</td>
                    <td>4.8 h</td>
                    <td>154</td>
                    <td><span class="status-badge good">OK</span></td>
                  </tr>
                  <tr>
                    <td>FL-03</td>
                    <td>3.1 h</td>
                    <td>92</td>
                    <td><span class="status-badge warning">B√°o rung</span></td>
                  </tr>
                  <tr>
                    <td>RTG-01</td>
                    <td>2.6 h</td>
                    <td>74</td>
                    <td><span class="status-badge bad">B·∫£o tr√¨</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== TAB: KHAI TH√ÅC ==================== -->
    <div class="tab-content" id="tab-kt">
      <div class="main-card">
        <!-- Page Title & Filters -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid #e5e7eb;">
          <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--accent-kt); margin: 0;">‚öì B√°o C√°o Ph√≤ng Khai Th√°c</h2>
          <div style="display: flex; gap: 8px;">
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Th·ªùi gian: Th√°ng 01/2026</option>
              <option>Th·ªùi gian: Th√°ng 12/2025</option>
              <option>Th·ªùi gian: Th√°ng 11/2025</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Kh√°ch h√†ng: All</option>
              <option>Kh√°ch h√†ng: Maersk</option>
              <option>Kh√°ch h√†ng: MSC</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>M·∫£ng kinh doanh: All</option>
              <option>M·∫£ng kinh doanh: S√† lan</option>
              <option>M·∫£ng kinh doanh: H√†ng r·ªùi</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Lo·∫°i chi ph√≠: All</option>
              <option>Lo·∫°i chi ph√≠: Nhi√™n li·ªáu</option>
              <option>Lo·∫°i chi ph√≠: B·∫£o tr√¨</option>
            </select>
          </div>
        </div>

        <!-- Sub-tabs for KT -->
        <div style="display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 1px solid #e5e7eb; padding-bottom: 8px;">
          <button class="kt-subtab-btn active" data-subtab="kt-revenue" onclick="showKtSubtab('kt-revenue')" style="background: rgba(167, 139, 250, 0.2); border: 1px solid var(--accent-kt); color: var(--accent-kt); padding: 8px 16px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.3s;">
            üìä Doanh thu - S·∫£n l∆∞·ª£ng - L·ª£i nhu·∫≠n
          </button>
          <button class="kt-subtab-btn" data-subtab="kt-repair" onclick="showKtSubtab('kt-repair')" style="background: transparent; border: 1px solid #e5e7eb; color: #6b7280; padding: 8px 16px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.3s;">
            üîß S·ª≠a ch·ªØa thi·∫øt b·ªã
          </button>
        </div>

        <!-- KT Sub-tab 1: Revenue - Volume - Profit -->
        <div class="kt-subtab-content active" id="kt-subtab-revenue">

        <!-- KPI Grid - 4 columns like image -->
        <div class="kpi-grid" style="grid-template-columns: repeat(4, 1fr);">
          <div class="kpi-card kt">
            <span class="kpi-chip danger">‚Üì 3%</span>
            <div class="kpi-label">Doanh thu</div>
            <div class="kpi-value kt">5,7 t·ª∑</div>
            <div class="kpi-sub">vs prev: 5.9 t·ª∑ | +10% ‚ñ≤</div>
            <div class="progress-bar" style="margin-top: 8px;">
              <div class="progress-fill kt" style="width: 75%;"></div>
            </div>
          </div>
          <div class="kpi-card kt">
            <span class="kpi-chip warning">+10% ‚ñ≤</span>
            <div class="kpi-label">Chi ph√≠</div>
            <div class="kpi-value kt">2,8 t·ª∑</div>
            <div class="kpi-sub">vs prev: 2.2 t·ª∑</div>
            <div class="progress-bar" style="margin-top: 8px;">
              <div class="progress-fill kt" style="width: 60%;"></div>
            </div>
          </div>
          <div class="kpi-card kt">
            <span class="kpi-chip danger">-10% ‚ñº</span>
            <div class="kpi-label">S·∫£n l∆∞·ª£ng S√† lan</div>
            <div class="kpi-value kt">700 t·∫•n</div>
            <div class="kpi-sub">vs prev: 810 t·∫•n</div>
            <div class="progress-bar" style="margin-top: 8px;">
              <div class="progress-fill kt" style="width: 70%;"></div>
            </div>
          </div>
          <div class="kpi-card kt">
            <span class="kpi-chip success">+2% ‚ñ≤</span>
            <div class="kpi-label">S·∫£n l∆∞·ª£ng h√†ng r·ªùi</div>
            <div class="kpi-value kt">12 t·∫•n</div>
            <div class="kpi-sub">vs prev: 11.8 t·∫•n</div>
            <div class="progress-bar" style="margin-top: 8px;">
              <div class="progress-fill kt" style="width: 85%;"></div>
            </div>
          </div>
        </div>

        <!-- ROW 1: Doanh thu charts -->
        <div class="section-row" style="grid-template-columns: 1.5fr 1fr; margin-top: 16px;">
          <!-- Doanh thu - S·ªë l∆∞·ª£ng - Chi ph√≠ theo th·ªùi gian -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title kt">Doanh thu - S·ªë l∆∞·ª£ng - Chi ph√≠ theo th·ªùi gian</div>
              </div>
              <div style="display: flex; gap: 12px; font-size: 0.72rem;">
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 12px; height: 3px; background: #4ade80; border-radius: 2px;"></span> L·ª£i nhu·∫≠n</span>
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 12px; height: 12px; background: #60a5fa; border-radius: 2px;"></span> Doanh thu</span>
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 12px; height: 12px; background: #facc15; border-radius: 2px;"></span> Chi ph√≠</span>
              </div>
            </div>
            <div class="chart-container" id="chart-kt-revenue-time" style="height: 280px;"></div>
          </div>

          <!-- So s√°nh doanh thu theo lo·∫°i khai th√°c -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title kt">So s√°nh doanh thu theo lo·∫°i khai th√°c</div>
                <div style="font-size: 0.7rem; color: var(--text-sub);">Th√°ng tr∆∞·ªõc ‚óÑ Th√°ng hi·ªán t·∫°i</div>
              </div>
            </div>
            <div class="chart-container" id="chart-kt-compare" style="height: 280px;"></div>
          </div>
        </div>

        <!-- ROW 2: S·∫£n l∆∞·ª£ng charts -->
        <div class="section-row" style="grid-template-columns: 1fr 1fr; margin-top: 16px;">
          <!-- S·∫£n l∆∞·ª£ng v·∫≠n chuy·ªÉn S√† Lan -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title kt">S·∫£n l∆∞·ª£ng v·∫≠n chuy·ªÉn S√† Lan</div>
              </div>
            </div>
            <div style="display: flex; gap: 8px; margin-bottom: 8px; font-size: 0.72rem;">
              <span style="padding: 4px 10px; border-radius: 999px; background: rgba(167, 139, 250, 0.15); color: var(--accent-kt);">Cont r·ªóng: -15%</span>
              <span style="padding: 4px 10px; border-radius: 999px; background: rgba(167, 139, 250, 0.15); color: var(--accent-kt);">Cont h√†ng: 7%</span>
            </div>
            <div style="display: flex; gap: 8px; margin-bottom: 8px; font-size: 0.72rem; color: var(--text-sub);">
              <span>‚ñ∏ S√† lan TPP</span>
              <span>‚ñ∏ S√† lan thu√™ chuy·∫øn</span>
            </div>
            <div class="chart-container" id="chart-kt-salan" style="height: 200px;"></div>
          </div>

          <!-- S·∫£n l∆∞·ª£ng h√†ng r·ªùi -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title kt">S·∫£n l∆∞·ª£ng h√†ng r·ªùi</div>
              </div>
              <div style="display: flex; gap: 8px; font-size: 0.72rem;">
                <span style="padding: 2px 8px; border-radius: 999px; background: rgba(56, 189, 248, 0.15); color: #38bdf8;">T·ªïng s·ªë l∆∞·ª£ng</span>
                <span style="font-weight: 600; color: var(--accent-kt);">446</span>
                <span style="color: var(--success);">+33% ‚ñ≤</span>
              </div>
            </div>
            <div class="chart-container" id="chart-kt-hangroi" style="height: 240px;"></div>
          </div>
        </div>

        <!-- ROW 3: Ph√¢n b·ªï chi ph√≠ + B·∫£ng chi ti·∫øt -->
        <div class="section-row" style="grid-template-columns: 1fr 1.5fr; margin-top: 16px;">
          <!-- Ph√¢n b·ªï chi ph√≠ -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title kt">Ph√¢n b·ªï chi ph√≠</div>
              </div>
            </div>
            <div style="display: flex; flex-direction: column; gap: 12px; padding: 8px 0;">
              <div style="display: flex; align-items: center; gap: 12px;">
                <span style="width: 90px; font-size: 0.75rem; color: var(--text-sub);">Thu√™ nh√¢n c√¥ng</span>
                <div style="flex: 1; display: flex; align-items: center; gap: 8px;">
                  <div class="progress-bar" style="flex: 1;">
                    <div class="progress-fill kt" style="width: 100%; background: linear-gradient(90deg, rgba(167,139,250,0.3), #a78bfa);"></div>
                  </div>
                  <span style="font-size: 0.72rem; color: var(--text-sub);">100tr</span>
                  <span style="font-size: 0.68rem; color: var(--danger);">-10% ‚ñº</span>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <span style="width: 90px; font-size: 0.75rem; color: var(--text-sub);">S·ª≠a thi·∫øt b·ªã</span>
                <div style="flex: 1; display: flex; align-items: center; gap: 8px;">
                  <div class="progress-bar" style="flex: 1;">
                    <div class="progress-fill kt" style="width: 50%; background: linear-gradient(90deg, rgba(167,139,250,0.3), #a78bfa);"></div>
                  </div>
                  <span style="font-size: 0.72rem; color: var(--text-sub);">500tr</span>
                  <span style="font-size: 0.68rem; color: var(--success);">+30% ‚ñ≤</span>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <span style="width: 90px; font-size: 0.75rem; color: var(--text-sub);">Thu√™ S√† Lan</span>
                <div style="flex: 1; display: flex; align-items: center; gap: 8px;">
                  <div class="progress-bar" style="flex: 1;">
                    <div class="progress-fill kt" style="width: 15%; background: linear-gradient(90deg, rgba(167,139,250,0.3), #a78bfa);"></div>
                  </div>
                  <span style="font-size: 0.72rem; color: var(--text-sub);">153</span>
                  <span style="font-size: 0.68rem; color: var(--danger);">-10% ‚ñº</span>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <span style="width: 90px; font-size: 0.75rem; color: var(--text-sub);">ƒê∆∞·ªùng x√°</span>
                <div style="flex: 1; display: flex; align-items: center; gap: 8px;">
                  <div class="progress-bar" style="flex: 1;">
                    <div class="progress-fill kt" style="width: 150%; background: linear-gradient(90deg, rgba(167,139,250,0.3), #a78bfa);"></div>
                  </div>
                  <span style="font-size: 0.72rem; color: var(--text-sub);">1531</span>
                  <span style="font-size: 0.68rem; color: var(--danger);">-10% ‚ñº</span>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <span style="width: 90px; font-size: 0.75rem; color: var(--text-sub);">Tr·∫£ c√°p</span>
                <div style="flex: 1; display: flex; align-items: center; gap: 8px;">
                  <div class="progress-bar" style="flex: 1;">
                    <div class="progress-fill" style="width: 150%; background: linear-gradient(90deg, rgba(239,68,68,0.3), #f97373);"></div>
                  </div>
                  <span style="font-size: 0.72rem; color: var(--text-sub);">1831</span>
                  <span style="font-size: 0.68rem; color: var(--danger);">-10% ‚ñº</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Chi ti·∫øt t√¨nh h√¨nh khai th√°c theo kh√°ch h√†ng -->
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title kt">Chi ti·∫øt t√¨nh h√¨nh khai th√°c theo kh√°ch h√†ng</div>
              </div>
            </div>
            <table>
              <thead>
                <tr>
                  <th></th>
                  <th>Kh√°ch h√†ng</th>
                  <th>S·∫£n l∆∞·ª£ng</th>
                  <th>Doanh thu</th>
                  <th>Chi ph√≠</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="color: var(--text-sub);">‚àí</td>
                  <td><strong>C√¥ng ty A</strong></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td></td>
                  <td style="padding-left: 20px;">Cont r·ªóng</td>
                  <td>25 | 5 | 1045</td>
                  <td>1 t·ª∑ 3</td>
                  <td>500tr</td>
                </tr>
                <tr>
                  <td></td>
                  <td style="padding-left: 20px;">Cont h√†ng</td>
                  <td>5 | ~80%</td>
                  <td>550</td>
                  <td>150tr</td>
                </tr>
                <tr>
                  <td></td>
                  <td style="padding-left: 20px;">H√†ng r·ªùi</td>
                  <td>1045</td>
                  <td>300</td>
                  <td>100tr</td>
                </tr>
                <tr>
                  <td style="color: var(--text-sub);">+</td>
                  <td><strong>C√¥ng ty B</strong></td>
                  <td>10 | _ | 1034</td>
                  <td>700tr</td>
                  <td>120tr</td>
                </tr>
                <tr>
                  <td style="color: var(--text-sub);">+</td>
                  <td><strong>C√¥ng ty C</strong></td>
                  <td>data</td>
                  <td>data</td>
                  <td></td>
                </tr>
                <tr>
                  <td style="color: var(--text-sub);">+</td>
                  <td><strong>C√¥ng ty D</strong></td>
                  <td>data</td>
                  <td>data</td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        </div>
        <!-- End KT Sub-tab 1 -->

        <!-- KT Sub-tab 2: Equipment Repair -->
        <div class="kt-subtab-content" id="kt-subtab-repair" style="display: none;">
          <!-- KPI Grid for Repair -->
          <div class="kpi-grid" style="grid-template-columns: repeat(4, 1fr);">
            <div class="kpi-card" style="background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%); border-left: 4px solid #ef4444;">
              <span class="kpi-chip danger" style="background: rgba(239, 68, 68, 0.15); color: #ef4444; padding: 4px 10px; border-radius: 999px; font-size: 0.7rem; font-weight: 600;">+15% ‚ñ≤</span>
              <div class="kpi-label" style="font-size: 0.8rem; color: #6b7280; margin: 8px 0 4px;">T·ªîNG L·∫¶N S·ª¨A CH·ªÆA</div>
              <div class="kpi-value" style="font-size: 2.5rem; font-weight: 700; color: #ef4444; margin: 4px 0;">127</div>
              <div class="kpi-sub" style="font-size: 0.75rem; color: #9ca3af;">Trong th√°ng - so v·ªõi th√°ng tr∆∞·ªõc</div>
            </div>
            <div class="kpi-card" style="background: linear-gradient(135deg, #fef3c7 0%, #ffffff 100%); border-left: 4px solid #f59e0b;">
              <span class="kpi-chip warning" style="background: rgba(245, 158, 11, 0.15); color: #f59e0b; padding: 4px 10px; border-radius: 999px; font-size: 0.7rem; font-weight: 600;">+8% ‚ñ≤</span>
              <div class="kpi-label" style="font-size: 0.8rem; color: #6b7280; margin: 8px 0 4px;">T·ªîNG CHI PH√ç</div>
              <div class="kpi-value" style="font-size: 2.5rem; font-weight: 700; color: #f59e0b; margin: 4px 0;">2.8 t·ª∑</div>
              <div class="kpi-sub" style="font-size: 0.75rem; color: #9ca3af;">Chi ph√≠ c·ªßa ch·ªâa ch·ªØa trong th√°ng n√†y</div>
            </div>
            <div class="kpi-card" style="background: linear-gradient(135deg, #d1fae5 0%, #ffffff 100%); border-left: 4px solid #10b981;">
              <div class="kpi-label" style="font-size: 0.8rem; color: #6b7280; margin: 8px 0 4px;">TH·ªúI GIAN TB L·∫¶N</div>
              <div class="kpi-value" style="font-size: 2.5rem; font-weight: 700; color: #10b981; margin: 4px 0;">4.2 ng√†y</div>
              <div class="kpi-sub" style="font-size: 0.75rem; color: #9ca3af;">Th·ªùi gian s·ª≠a ch·ªØa trung b√¨nh</div>
            </div>
            <div class="kpi-card" style="background: linear-gradient(135deg, #dbeafe 0%, #ffffff 100%); border-left: 4px solid #a78bfa;">
              <div class="kpi-label" style="font-size: 0.8rem; color: #6b7280; margin: 8px 0 4px;">THI·∫æT B·ªä ƒêANG S·ª¨A</div>
              <div class="kpi-value" style="font-size: 2.5rem; font-weight: 700; color: #a78bfa; margin: 4px 0;">18</div>
              <div class="kpi-sub" style="font-size: 0.75rem; color: #9ca3af;">ƒêang trong qu√° tr√¨nh s·ª≠a ch·ªØa</div>
            </div>
          </div>

          <!-- ROW 1: Repair trends -->
          <div class="section-row" style="grid-template-columns: 1fr 1fr 1fr; margin-top: 20px;">
            <!-- S·ªë l·∫ßn s·ª≠a ch·ªØa & chi ph√≠ theo th·ªùi gian -->
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title" style="color: #1f2937; font-weight: 600;">S·ªê L·∫¶N S·ª¨A CH·ªÆA & CHI PH√ç THEO TH·ªúI GIAN</div>
                </div>
              </div>
              <div style="display: flex; gap: 12px; padding: 0 16px 8px; font-size: 0.75rem;">
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 14px; height: 14px; background: #ef4444; border-radius: 2px;"></span> S·ªë l·∫ßn s·ª≠a ch·ªØa</span>
                <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 14px; height: 3px; background: #f97316; border-radius: 2px;"></span> Chi ph√≠ (‚Ç´)</span>
              </div>
              <div class="chart-container" id="chart-kt-repair-trend" style="height: 240px;"></div>
            </div>

            <!-- T·ª∑ tr·ªçng lo·∫°i s·ª≠a ch·ªØa -->
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title" style="color: #1f2937; font-weight: 600;">T·ª∂ TR·ªåNG LO·∫†I S·ª¨A CH·ªÆA</div>
                </div>
              </div>
              <div class="chart-container" id="chart-kt-repair-type" style="height: 280px;"></div>
            </div>

            <!-- Top 10 l·ªói c·∫ßn s·ª≠a ch·ªØa -->
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title" style="color: #1f2937; font-weight: 600;">TOP 10 L·ªñI C·∫¶N S·ª¨A CH·ªÆA</div>
                </div>
              </div>
              <div class="chart-container" id="chart-kt-top-errors" style="height: 280px;"></div>
            </div>
          </div>

          <!-- ROW 2: Repair time table + Heatmap -->
          <div class="section-row" style="grid-template-columns: 1fr 1fr; margin-top: 20px;">
            <!-- Th·ªùi gian s·ª≠a ch·ªØa theo thi·∫øt b·ªã (Table format) -->
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title" style="color: #1f2937; font-weight: 600;">TH·ªúI GIAN S·ª¨A CH·ªÆA THEO THI·∫æT B·ªä</div>
                </div>
              </div>
              <div style="overflow-x: auto;">
                <table style="width: 100%; font-size: 0.85rem;">
                  <thead>
                    <tr style="background: #f9fafb;">
                      <th style="padding: 12px; text-align: left; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">THI·∫æT B·ªä</th>
                      <th style="padding: 12px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">TH·ªúI GIAN S·ª¨A CH·ªÆA TB (NG√ÄY)</th>
                      <th style="padding: 12px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">S·ªê L·∫¶N S·ª¨A CH·ªÆA</th>
                      <th style="padding: 12px; text-align: right; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">CHI PH√ç S·ª¨A CH·ªÆA (TRI·ªÜUƒë)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                      <td style="padding: 12px; font-weight: 500;">S√† lan SL-01</td>
                      <td style="padding: 12px; text-align: center; color: #f59e0b; font-weight: 600;">7.3</td>
                      <td style="padding: 12px; text-align: center;">29</td>
                      <td style="padding: 12px; text-align: right; color: #ef4444; font-weight: 600;">820</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                      <td style="padding: 12px; font-weight: 500;">S√† lan SL-02</td>
                      <td style="padding: 12px; text-align: center; color: #f59e0b; font-weight: 600;">6.1</td>
                      <td style="padding: 12px; text-align: center;">27</td>
                      <td style="padding: 12px; text-align: right; color: #ef4444; font-weight: 600;">685</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                      <td style="padding: 12px; font-weight: 500;">C·∫ßu C-01</td>
                      <td style="padding: 12px; text-align: center; color: #f59e0b; font-weight: 600;">5.2</td>
                      <td style="padding: 12px; text-align: center;">35</td>
                      <td style="padding: 12px; text-align: right; color: #10b981; font-weight: 600;">520</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                      <td style="padding: 12px; font-weight: 500;">C·∫ßu C-02</td>
                      <td style="padding: 12px; text-align: center; color: #10b981; font-weight: 600;">3.8</td>
                      <td style="padding: 12px; text-align: center;">23</td>
                      <td style="padding: 12px; text-align: right; color: #10b981; font-weight: 600;">380</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                      <td style="padding: 12px; font-weight: 500;">Xe n√¢ng XN-01</td>
                      <td style="padding: 12px; text-align: center; color: #10b981; font-weight: 600;">4.5</td>
                      <td style="padding: 12px; text-align: center;">22</td>
                      <td style="padding: 12px; text-align: right; color: #10b981; font-weight: 600;">285</td>
                    </tr>
                    <tr>
                      <td style="padding: 12px; font-weight: 500;">Xe n√¢ng XN-02</td>
                      <td style="padding: 12px; text-align: center; color: #10b981; font-weight: 600;">3.2</td>
                      <td style="padding: 12px; text-align: center;">20</td>
                      <td style="padding: 12px; text-align: right; color: #10b981; font-weight: 600;">245</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Heatmap s·ª≠a ch·ªØa l·ªói theo xe v√† lo·∫°i s·ª≠a ch·ªØa -->
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title" style="color: #1f2937; font-weight: 600;">HEATMAP S·ª¨A CH·ªÆA L·ªñI THEO XE & LO·∫†I S·ª¨A CH·ªÆA</div>
                </div>
              </div>
              <div style="overflow-x: auto;">
                <table style="width: 100%; font-size: 0.8rem; text-align: center;">
                  <thead>
                    <tr style="background: #f9fafb;">
                      <th style="padding: 10px; font-weight: 600; color: #6b7280; border: 1px solid #e5e7eb;">XE / THI·∫æT B·ªä</th>
                      <th style="padding: 10px; font-weight: 600; color: #6b7280; border: 1px solid #e5e7eb;">ƒê·ªòNG C∆†</th>
                      <th style="padding: 10px; font-weight: 600; color: #6b7280; border: 1px solid #e5e7eb;">H·ªÜ TH·ªêNG TH·ª¶Y L·ª∞C</th>
                      <th style="padding: 10px; font-weight: 600; color: #6b7280; border: 1px solid #e5e7eb;">ƒêI·ªÜN</th>
                      <th style="padding: 10px; font-weight: 600; color: #6b7280; border: 1px solid #e5e7eb;">B·∫¢O TR√å ƒê·ªäNH K·ª≤</th>
                      <th style="padding: 10px; font-weight: 600; color: #6b7280; border: 1px solid #e5e7eb;">KH√ÅC</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="padding: 10px; font-weight: 500; border: 1px solid #e5e7eb; text-align: left;">S√† lan SL-01</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #fca5a5; color: #7f1d1d; font-weight: 600;">12</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #fcd34d; color: #78350f; font-weight: 600;">8</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #86efac; color: #14532d; font-weight: 600;">3</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #bfdbfe; color: #1e3a8a; font-weight: 600;">4</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #e0e7ff; color: #3730a3; font-weight: 600;">2</td>
                    </tr>
                    <tr>
                      <td style="padding: 10px; font-weight: 500; border: 1px solid #e5e7eb; text-align: left;">S√† lan SL-02</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #fdba74; color: #7c2d12; font-weight: 600;">7</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #fde047; color: #713f12; font-weight: 600;">10</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #86efac; color: #14532d; font-weight: 600;">5</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #bfdbfe; color: #1e3a8a; font-weight: 600;">4</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #e0e7ff; color: #3730a3; font-weight: 600;">1</td>
                    </tr>
                    <tr>
                      <td style="padding: 10px; font-weight: 500; border: 1px solid #e5e7eb; text-align: left;">C·∫ßu C-01</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #86efac; color: #14532d; font-weight: 600;">5</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #fca5a5; color: #7f1d1d; font-weight: 600;">15</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #86efac; color: #14532d; font-weight: 600;">6</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #bfdbfe; color: #1e3a8a; font-weight: 600;">6</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #e0e7ff; color: #3730a3; font-weight: 600;">3</td>
                    </tr>
                    <tr>
                      <td style="padding: 10px; font-weight: 500; border: 1px solid #e5e7eb; text-align: left;">Xe n√¢ng XN-01</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #bbf7d0; color: #14532d; font-weight: 600;">4</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #bbf7d0; color: #14532d; font-weight: 600;">5</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #fde047; color: #713f12; font-weight: 600;">8</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #86efac; color: #14532d; font-weight: 600;">3</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #e0e7ff; color: #3730a3; font-weight: 600;">2</td>
                    </tr>
                    <tr>
                      <td style="padding: 10px; font-weight: 500; border: 1px solid #e5e7eb; text-align: left;">Xe n√¢ng XN-02</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #bbf7d0; color: #14532d; font-weight: 600;">3</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #bbf7d0; color: #14532d; font-weight: 600;">4</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #fde047; color: #713f12; font-weight: 600;">9</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #86efac; color: #14532d; font-weight: 600;">3</td>
                      <td style="padding: 10px; border: 1px solid #e5e7eb; background: #e0e7ff; color: #3730a3; font-weight: 600;">1</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- ROW 3: Chi ti·∫øt l·ªãch s·ª≠ s·ª≠a ch·ªØa -->
          <div class="section-row" style="grid-template-columns: 1fr; margin-top: 20px;">
            <!-- Chi ti·∫øt l·ªãch s·ª≠ s·ª≠a ch·ªØa -->
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title" style="color: #1f2937; font-weight: 600;">CHI TI·∫æT L·ªäCH S·ª¨ S·ª¨A CH·ªÆA</div>
                </div>
              </div>
              <div style="overflow-x: auto;">
                <table style="width: 100%; font-size: 0.85rem;">
                  <thead>
                    <tr style="background: #f9fafb;">
                      <th style="padding: 12px; text-align: left; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">M√É SC</th>
                      <th style="padding: 12px; text-align: left; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">THI·∫æT B·ªä</th>
                      <th style="padding: 12px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">LO·∫†I S·ª¨A CH·ªÆA</th>
                      <th style="padding: 12px; text-align: left; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">N·ªòI DUNG</th>
                      <th style="padding: 12px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">NG√ÄY B·∫ÆT ƒê·∫¶U</th>
                      <th style="padding: 12px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">NG√ÄY HO√ÄN TH√ÄNH</th>
                      <th style="padding: 12px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">TH·ªúI GIAN (NG√ÄY)</th>
                      <th style="padding: 12px; text-align: right; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">CHI PH√ç</th>
                      <th style="padding: 12px; text-align: center; font-weight: 600; color: #6b7280; border-bottom: 2px solid #e5e7eb;">TR·∫†NG TH√ÅI</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                      <td style="padding: 12px; font-weight: 500;">SC 2026-001</td>
                      <td style="padding: 12px;">S√† lan SL-01</td>
                      <td style="padding: 12px; text-align: center;"><span style="padding: 4px 12px; border-radius: 999px; background: rgba(239, 68, 68, 0.15); color: #ef4444; font-size: 0.75rem; font-weight: 600;">Ph√°t sinh</span></td>
                      <td style="padding: 12px;">S·ª≠a ch·ªØa ƒë·ªông c∆° ch√≠nh - thay th·∫ø piston</td>
                      <td style="padding: 12px; text-align: center;">02/01/2026</td>
                      <td style="padding: 12px; text-align: center;">08/01/2026</td>
                      <td style="padding: 12px; text-align: center; font-weight: 600;">6</td>
                      <td style="padding: 12px; text-align: right; color: #ef4444; font-weight: 600;">85 tri·ªáu</td>
                      <td style="padding: 12px; text-align: center;"><span style="padding: 4px 12px; border-radius: 999px; background: rgba(16, 185, 129, 0.15); color: #10b981; font-size: 0.75rem; font-weight: 600;">Ho√†n th√†nh</span></td>
                    </tr>
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                      <td style="padding: 12px; font-weight: 500;">SC 2026-002</td>
                      <td style="padding: 12px;">C·∫ßu C-01</td>
                      <td style="padding: 12px; text-align: center;"><span style="padding: 4px 12px; border-radius: 999px; background: rgba(239, 68, 68, 0.15); color: #ef4444; font-size: 0.75rem; font-weight: 600;">Ph√°t sinh</span></td>
                      <td style="padding: 12px;">S·ª≠a h·ªá th·ªëng th·ªßy l·ª±c - v√¥ xi d·∫ßu</td>
                      <td style="padding: 12px; text-align: center;">03/01/2026</td>
                      <td style="padding: 12px; text-align: center;">05/01/2026</td>
                      <td style="padding: 12px; text-align: center; font-weight: 600;">2</td>
                      <td style="padding: 12px; text-align: right; color: #ef4444; font-weight: 600;">45 tri·ªáu</td>
                      <td style="padding: 12px; text-align: center;"><span style="padding: 4px 12px; border-radius: 999px; background: rgba(16, 185, 129, 0.15); color: #10b981; font-size: 0.75rem; font-weight: 600;">Ho√†n th√†nh</span></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <!-- End KT Sub-tab 2 -->

      </div>
    </div>

    <!-- ==================== TAB: KH√ÅCH H√ÄNG ==================== -->
    <div class="tab-content" id="tab-customer">
      <div class="main-card">
        <!-- Page Title & Filters -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid #e5e7eb;">
          <h2 style="font-size: 1.5rem; font-weight: 700; color: #2563eb; margin: 0;">üë• Qu·∫£n L√Ω Kh√°ch H√†ng</h2>
          <div style="display: flex; gap: 8px;">
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Th·ªùi gian: Th√°ng 01/2026</option>
              <option>Th·ªùi gian: Th√°ng 12/2025</option>
              <option>Th·ªùi gian: Th√°ng 11/2025</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>Ph√¢n lo·∫°i: T·∫•t c·∫£</option>
              <option>Ph√¢n lo·∫°i: VIP</option>
              <option>Ph√¢n lo·∫°i: Th∆∞·ªùng xuy√™n</option>
            </select>
            <select class="filter-select" style="background: #dbeafe; border: 1px solid #93c5fd; border-radius: 999px; padding: 6px 12px; font-size: 0.82rem; color: #1e40af; font-weight: 600; cursor: pointer;">
              <option>D·ªãch v·ª•: T·∫•t c·∫£</option>
              <option>D·ªãch v·ª•: MnR</option>
              <option>D·ªãch v·ª•: Qu·∫£n l√Ω R·ªóng</option>
              <option>D·ªãch v·ª•: Khai th√°c</option>
            </select>
          </div>
        </div>

        <!-- KPI Cards -->
        <div class="kpi-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 20px;">
          <div class="kpi-card" style="border-left: 3px solid #2563eb;">
            <div class="kpi-label">T·ªïng kh√°ch h√†ng</div>
            <div class="kpi-value" style="color: #2563eb;">127</div>
            <div class="kpi-sub">ƒêang ho·∫°t ƒë·ªông</div>
          </div>
          <div class="kpi-card" style="border-left: 3px solid #10b981;">
            <div class="kpi-label">Kh√°ch h√†ng m·ªõi</div>
            <div class="kpi-value" style="color: #10b981;">15</div>
            <div class="kpi-sub">Th√°ng n√†y | +5 vs th√°ng tr∆∞·ªõc</div>
          </div>
          <div class="kpi-card" style="border-left: 3px solid #f59e0b;">
            <div class="kpi-label">Doanh thu trung b√¨nh</div>
            <div class="kpi-value" style="color: #f59e0b;">18.5 tr</div>
            <div class="kpi-sub">/ kh√°ch h√†ng / th√°ng</div>
          </div>
          <div class="kpi-card" style="border-left: 3px solid #ef4444;">
            <div class="kpi-label">C√¥ng n·ª£</div>
            <div class="kpi-value" style="color: #ef4444;">3.2 t·ª∑</div>
            <div class="kpi-sub">T·ªïng c√¥ng n·ª£ hi·ªán t·∫°i</div>
          </div>
        </div>

        <!-- Charts -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
          <div class="card">
            <div class="card-header">
              <div class="card-title">Top 10 kh√°ch h√†ng theo doanh thu</div>
            </div>
            <div class="chart-container" id="chart-customer-revenue"></div>
          </div>
          <div class="card">
            <div class="card-header">
              <div class="card-title">Ph√¢n b·ªï kh√°ch h√†ng theo d·ªãch v·ª•</div>
            </div>
            <div class="chart-container" id="chart-customer-service"></div>
          </div>
        </div>

        <!-- Customer Table -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">Danh s√°ch kh√°ch h√†ng chi ti·∫øt</div>
          </div>
          <table>
            <thead>
              <tr>
                <th>STT</th>
                <th>T√™n kh√°ch h√†ng</th>
                <th>Ph√¢n lo·∫°i</th>
                <th>D·ªãch v·ª• s·ª≠ d·ª•ng</th>
                <th>Doanh thu (th√°ng)</th>
                <th>C√¥ng n·ª£</th>
                <th>Li√™n h·ªá</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td><strong>C√¥ng ty TNHH Maersk Vi·ªát Nam</strong></td>
                <td><span class="status-badge" style="background: #fef3c7; color: #92400e;">VIP</span></td>
                <td>MnR, Khai th√°c</td>
                <td style="font-weight: 600; color: #10b981;">850 tri·ªáu</td>
                <td style="color: #ef4444;">120 tri·ªáu</td>
                <td>contact@maersk.vn</td>
              </tr>
              <tr>
                <td>2</td>
                <td><strong>C√¥ng ty C·ªï ph·∫ßn MSC</strong></td>
                <td><span class="status-badge" style="background: #fef3c7; color: #92400e;">VIP</span></td>
                <td>MnR, QLR, Khai th√°c</td>
                <td style="font-weight: 600; color: #10b981;">720 tri·ªáu</td>
                <td style="color: #ef4444;">95 tri·ªáu</td>
                <td>info@msc.com.vn</td>
              </tr>
              <tr>
                <td>3</td>
                <td><strong>C√¥ng ty HAPAG-LLOYD</strong></td>
                <td><span class="status-badge" style="background: #dbeafe; color: #1e40af;">Th∆∞·ªùng xuy√™n</span></td>
                <td>Qu·∫£n l√Ω R·ªóng</td>
                <td style="font-weight: 600; color: #10b981;">450 tri·ªáu</td>
                <td style="color: #10b981;">0</td>
                <td>vietnam@hapag-lloyd.com</td>
              </tr>
              <tr>
                <td>4</td>
                <td><strong>C√¥ng ty CMA CGM</strong></td>
                <td><span class="status-badge" style="background: #dbeafe; color: #1e40af;">Th∆∞·ªùng xuy√™n</span></td>
                <td>MnR, Khai th√°c</td>
                <td style="font-weight: 600; color: #10b981;">380 tri·ªáu</td>
                <td style="color: #f59e0b;">45 tri·ªáu</td>
                <td>contact@cma-cgm.vn</td>
              </tr>
              <tr>
                <td>5</td>
                <td><strong>C√¥ng ty COSCO Shipping</strong></td>
                <td><span class="status-badge" style="background: #dbeafe; color: #1e40af;">Th∆∞·ªùng xuy√™n</span></td>
                <td>Qu·∫£n l√Ω R·ªóng, Khai th√°c</td>
                <td style="font-weight: 600; color: #10b981;">320 tri·ªáu</td>
                <td style="color: #10b981;">0</td>
                <td>info@cosco.com.vn</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>


  </div>

  <script>
    // Navigation
    function showPage(pageId) {
      console.log('showPage called with:', pageId);
      const pages = document.querySelectorAll('.tab-content');
      pages.forEach(page => page.classList.remove('active'));

      // Remove active from nav buttons
      const buttons = document.querySelectorAll('.nav-item');
      buttons.forEach(btn => btn.classList.remove('active'));
      const activeBtn = document.querySelector(`.nav-item[data-page="${pageId}"]`);

      const pageElement = document.getElementById('tab-' + pageId);
      console.log('pageElement found:', pageElement);
      if (pageElement) {
        pageElement.classList.add('active');
      }

      if (activeBtn) {
        activeBtn.classList.add('active');
      }

      // Scroll to top of content
      const contentWrapper = document.querySelector('.content-wrapper');
      if (contentWrapper) {
        contentWrapper.scrollTop = 0;
      }

      // Resize charts when tab becomes visible
      setTimeout(() => {
        window.dispatchEvent(new Event('resize'));
      }, 100);
    }

    // KT Sub-tab switching
    function showKtSubtab(subtabId) {
      console.log('showKtSubtab called with:', subtabId);
      
      // Hide all KT subtab contents
      const subtabs = document.querySelectorAll('.kt-subtab-content');
      subtabs.forEach(tab => {
        tab.classList.remove('active');
        tab.style.display = 'none';
      });
      
      // Remove active from all KT subtab buttons
      const buttons = document.querySelectorAll('.kt-subtab-btn');
      buttons.forEach(btn => btn.classList.remove('active'));
      
      // Show selected subtab
      const selectedTab = document.getElementById('kt-subtab-' + subtabId.replace('kt-', ''));
      if (selectedTab) {
        selectedTab.classList.add('active');
        selectedTab.style.display = 'block';
      }
      
      // Activate clicked button
      const activeBtn = document.querySelector(`.kt-subtab-btn[data-subtab="${subtabId}"]`);
      if (activeBtn) {
        activeBtn.classList.add('active');
      }
      
      // Resize charts
      setTimeout(() => {
        window.dispatchEvent(new Event('resize'));
      }, 100);
    }

    // Tab switching functionality (old code for compatibility)
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        // Remove active from all tabs
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        // Add active to clicked tab
        btn.classList.add('active');
        document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
        
        // Resize charts when tab becomes visible
        setTimeout(() => {
          window.dispatchEvent(new Event('resize'));
        }, 100);
      });
    });

    // ==================== CHARTS ====================
    
    // Overview - Revenue by segment
    const chartRevenueOverview = echarts.init(document.getElementById('chart-revenue-overview'));
    chartRevenueOverview.setOption({
      tooltip: { trigger: 'axis' },
      legend: { 
        data: ['MnR', 'Qu·∫£n l√Ω R·ªóng', 'Khai th√°c'],
        textStyle: { color: '#9ca3af' },
        top: 0
      },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '15%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['T8', 'T9', 'T10', 'T11', 'T12', 'T1/26'],
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisLabel: { color: '#9ca3af' }
      },
      yAxis: {
        type: 'value',
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisLabel: { color: '#9ca3af', formatter: '{value} t·ª∑' },
        splitLine: { lineStyle: { color: '#1e293b' } }
      },
      series: [
        {
          name: 'MnR',
          type: 'bar',
          data: [1.8, 2.0, 2.1, 2.3, 2.2, 2.45],
          itemStyle: { color: '#f97316' }
        },
        {
          name: 'Qu·∫£n l√Ω R·ªóng',
          type: 'bar',
          data: [1.2, 1.3, 1.4, 1.5, 1.4, 1.6],
          itemStyle: { color: '#38bdf8' }
        },
        {
          name: 'Khai th√°c',
          type: 'bar',
          data: [3.2, 3.4, 3.5, 3.6, 3.7, 3.8],
          itemStyle: { color: '#a78bfa' }
        }
      ]
    });

    // Overview - KPI Comparison
    const chartKpiComparison = echarts.init(document.getElementById('chart-kpi-comparison'));
    chartKpiComparison.setOption({
      tooltip: { trigger: 'axis' },
      legend: { 
        data: ['Target', 'Actual'],
        textStyle: { color: '#9ca3af' },
        top: 0
      },
      radar: {
        indicator: [
          { name: 'Doanh thu MnR', max: 100 },
          { name: 'Cont s·ª≠a ch·ªØa', max: 100 },
          { name: 'T·ªìn b√£i QLR', max: 100 },
          { name: 'Xu·∫•t/Nh·∫≠p QLR', max: 100 },
          { name: 'Chuy·∫øn KT', max: 100 },
          { name: 'TEU v·∫≠n chuy·ªÉn', max: 100 }
        ],
        center: ['50%', '55%'],
        radius: '65%',
        axisName: { color: '#9ca3af', fontSize: 10 },
        splitArea: { areaStyle: { color: ['rgba(15, 23, 42, 0.8)'] } },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: '#1e293b' } }
      },
      series: [{
        type: 'radar',
        data: [
          {
            value: [100, 100, 100, 100, 100, 100],
            name: 'Target',
            lineStyle: { color: '#4ade80', type: 'dashed' },
            areaStyle: { color: 'rgba(74, 222, 128, 0.1)' }
          },
          {
            value: [78, 85, 92, 88, 85, 90],
            name: 'Actual',
            lineStyle: { color: '#38bdf8' },
            areaStyle: { color: 'rgba(56, 189, 248, 0.2)' }
          }
        ]
      }]
    });

    // ==================== MnR NEW CHARTS ====================
    
    // MnR - Doanh thu - S·ªë l∆∞·ª£ng - Chi ph√≠ theo th·ªùi gian
    const chartMnrRevenueTime = echarts.init(document.getElementById('chart-mnr-revenue-time'));
    chartMnrRevenueTime.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { show: false },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '8%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11'],
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } }
      },
      series: [
        {
          name: 'Doanh thu',
          type: 'bar',
          data: [42, 35, 48, 52, 45, 58, 42, 48, 55, 50, 45],
          itemStyle: { color: '#60a5fa' },
          barMaxWidth: 25
        },
        {
          name: 'Chi ph√≠',
          type: 'bar',
          data: [15, 12, 18, 20, 16, 22, 14, 18, 20, 18, 16],
          itemStyle: { color: '#facc15' },
          barMaxWidth: 25
        },
        {
          name: 'L·ª£i nhu·∫≠n',
          type: 'line',
          data: [55, 50, 62, 68, 58, 75, 55, 65, 72, 68, 60],
          smooth: true,
          lineStyle: { color: '#4ade80', width: 2 },
          itemStyle: { color: '#4ade80' },
          symbol: 'circle',
          symbolSize: 5
        }
      ]
    });

    // MnR - Ph√¢n nh√≥m doanh thu (Pie)
    const chartMnrPie = echarts.init(document.getElementById('chart-mnr-pie'));
    chartMnrPie.setOption({
      tooltip: { trigger: 'item' },
      legend: {
        orient: 'vertical',
        right: '5%',
        top: 'center',
        textStyle: { color: '#9ca3af', fontSize: 11 }
      },
      series: [{
        type: 'pie',
        radius: ['40%', '70%'],
        center: ['35%', '50%'],
        avoidLabelOverlap: false,
        itemStyle: { borderRadius: 6, borderColor: '#0a0f1a', borderWidth: 2 },
        label: { show: false },
        data: [
          { value: 45, name: 'MSC', itemStyle: { color: '#f97316' } },
          { value: 35, name: 'Kh√°ch h√†ng', itemStyle: { color: '#60a5fa' } },
          { value: 20, name: 'KH√ÅC', itemStyle: { color: '#9ca3af' } }
        ]
      }]
    });

    // MnR - S·ªë Cont ƒë√£ s·ª≠a (Gauge)
    const chartMnrGauge = echarts.init(document.getElementById('chart-mnr-gauge'));
    chartMnrGauge.setOption({
      series: [{
        type: 'gauge',
        startAngle: 200,
        endAngle: -20,
        min: 0,
        max: 7000,
        radius: '100%',
        center: ['50%', '55%'],
        splitNumber: 7,
        axisLine: {
          lineStyle: {
            width: 12,
            color: [
              [0.57, '#f97316'],
              [1, 'rgba(255,255,255,0.1)']
            ]
          }
        },
        pointer: { show: false },
        axisTick: { show: false },
        splitLine: { show: false },
        axisLabel: { show: false },
        detail: { show: false },
        data: [{ value: 4000 }]
      }]
    });

    // MnR - T·ªìn cont ch∆∞a s·ª≠a theo th·ªùi gian
    const chartMnrPending = echarts.init(document.getElementById('chart-mnr-pending'));
    chartMnrPending.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '10%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['Jan 22', 'Feb 22', 'Mar 22', 'Apr 22', 'May 22', 'Jun 22'],
        axisLabel: { fontSize: 9, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } }
      },
      series: [{
        type: 'line',
        data: [320, 380, 450, 420, 380, 350],
        smooth: true,
        lineStyle: { color: '#f97316', width: 2 },
        itemStyle: { color: '#f97316' },
        areaStyle: { color: 'rgba(249, 115, 22, 0.1)' }
      }]
    });

    // MnR - T·ªïng s·ªë l∆∞·ª£ng t·ªìn v√† gi√° tr·ªã t·ªìn theo th·ªùi gian
    const chartMnrInventory = echarts.init(document.getElementById('chart-mnr-inventory'));
    chartMnrInventory.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { data: ['S·ªë l∆∞·ª£ng', 'Gi√° tr·ªã'], textStyle: { fontSize: 10, color: '#9ca3af' }, top: 0 },
      grid: { left: '3%', right: '6%', bottom: '3%', top: '18%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10'],
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: [
        { type: 'value', name: 'SL', axisLabel: { fontSize: 9, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } } },
        { type: 'value', name: 'Gi√° tr·ªã', axisLabel: { fontSize: 9, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { show: false } }
      ],
      series: [
        {
          name: 'S·ªë l∆∞·ª£ng',
          type: 'line',
          data: [45, 52, 48, 55, 60, 58, 52, 48, 45, 42],
          smooth: true,
          lineStyle: { color: '#f97316', width: 2 },
          itemStyle: { color: '#f97316' },
          areaStyle: { color: 'rgba(249, 115, 22, 0.15)' }
        },
        {
          name: 'Gi√° tr·ªã',
          type: 'line',
          yAxisIndex: 1,
          data: [320, 380, 350, 420, 450, 430, 380, 350, 320, 300],
          smooth: true,
          lineStyle: { color: '#60a5fa', width: 2 },
          itemStyle: { color: '#60a5fa' },
          areaStyle: { color: 'rgba(96, 165, 250, 0.1)' }
        }
      ]
    });

    // QLR - Carrier distribution (New version with stacked bar + line)
    const chartQlrCarrierNew = echarts.init(document.getElementById('chart-qlr-carrier'));
    const carriers = ['H√£ng A', 'H√£ng B', 'H√£ng C', 'Kh√°c'];
    const data20 = [320, 210, 160, 260];
    const data40 = [410, 280, 210, 330];
    const totalsByCarrier = data20.map((v, i) => v + data40[i]);
    const capacity = 900;
    const percents = totalsByCarrier.map(v => Math.round((v / capacity) * 100));
    chartQlrCarrierNew.setOption({
      tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' }, backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { data: ["20'", "40'", "% c√¥ng su·∫•t"], top: 0, textStyle: { fontSize: 10, color: '#9ca3af' } },
      grid: { left: '6%', right: '6%', top: 40, bottom: 28, containLabel: true },
      xAxis: {
        type: 'category',
        data: carriers,
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: [
        { type: 'value', axisLabel: { fontSize: 10, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } } },
        { type: 'value', axisLabel: { formatter: '{value}%', fontSize: 10, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { show: false }, max: 100 }
      ],
      series: [
        { name: "20'", type: 'bar', stack: 'size', data: data20, barMaxWidth: 44, itemStyle: { color: '#60a5fa' } },
        { name: "40'", type: 'bar', stack: 'size', data: data40, barMaxWidth: 44, itemStyle: { color: '#a78bfa' } },
        { name: '% c√¥ng su·∫•t', type: 'line', yAxisIndex: 1, data: percents, symbol: 'circle', symbolSize: 6, lineStyle: { width: 2, color: '#facc15' }, itemStyle: { color: '#facc15' } }
      ]
    });

    // ==================== QLR ADDITIONAL CHARTS ====================
    
    // QLR Sparklines
    const qlrSparkIds = ['qlr-spark-1', 'qlr-spark-2', 'qlr-spark-3', 'qlr-spark-4', 'qlr-spark-5', 'qlr-spark-6'];
    const qlrSparkCharts = [];
    qlrSparkIds.forEach((id) => {
      const el = document.getElementById(id);
      if (el) {
        const c = echarts.init(el);
        const data = Array.from({length: 12}, () => Math.round(50 + Math.random() * 60));
        c.setOption({
          tooltip: { show: false },
          grid: { left: 0, right: 0, top: 4, bottom: 0 },
          xAxis: { show: false, type: 'category', data: [] },
          yAxis: { show: false, type: 'value' },
          series: [{
            type: 'line',
            smooth: true,
            data: data,
            showSymbol: false,
            lineStyle: { width: 1.4, color: '#38bdf8' },
            areaStyle: { color: 'rgba(56, 189, 248, 0.06)' }
          }]
        });
        qlrSparkCharts.push(c);
      }
    });

    // QLR - Nh·∫≠p/Xu·∫•t theo gi·ªù
    const chartQlrInoutHour = echarts.init(document.getElementById('chart-qlr-inout-hour'));
    const hours = ['14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00'];
    const inData = [28, 32, 45, 50, 46, 38, 38, 46];
    const outData = [22, 26, 40, 44, 41, 36, 34, 48];
    const totalData = inData.map((v, i) => v + outData[i]);
    chartQlrInoutHour.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.75)', borderColor: 'rgba(255,255,255,0.06)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { data: ['Nh·∫≠p', 'Xu·∫•t', 'T·ªïng'], textStyle: { fontSize: 11, color: '#9ca3af' } },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '15%', containLabel: true },
      xAxis: {
        type: 'category',
        data: hours,
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: {
        type: 'value',
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.03)' } }
      },
      series: [
        { name: 'Nh·∫≠p', type: 'bar', data: inData, itemStyle: { color: '#38bdf8' } },
        { name: 'Xu·∫•t', type: 'bar', data: outData, itemStyle: { color: '#60a5fa' } },
        { name: 'T·ªïng', type: 'line', data: totalData, itemStyle: { color: '#a78bfa' } }
      ]
    });

    // QLR - Heatmap b√£i
    const chartQlrHeatmap = echarts.init(document.getElementById('chart-qlr-heatmap'));
    const cols = ['A', 'B', 'C', 'D', 'E', 'F'];
    const rows = ['Y1', 'Y2', 'Y3', 'Y4', 'Y5'];
    const qlrHeatmapData = [];
    for (let i = 0; i < rows.length; i++) {
      for (let j = 0; j < cols.length; j++) {
        qlrHeatmapData.push([j, i, Math.round(Math.random() * 100)]);
      }
    }
    chartQlrHeatmap.setOption({
      tooltip: { backgroundColor: 'rgba(0,0,0,0.75)', borderColor: 'rgba(255,255,255,0.06)', textStyle: { fontSize: 11, color: '#ffffff' } },
      grid: { height: '70%', top: '15%' },
      xAxis: {
        type: 'category',
        data: cols,
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: {
        type: 'category',
        data: rows,
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      visualMap: {
        min: 0,
        max: 100,
        orient: 'horizontal',
        left: 'center',
        top: 0,
        calculable: true,
        textStyle: { fontSize: 10, color: '#9ca3af' },
        inRange: { color: ['#1e3a5f', '#38bdf8', '#f97316', '#dc2626'] }
      },
      series: [{
        type: 'heatmap',
        data: qlrHeatmapData,
        label: { show: true, fontSize: 10, color: '#fff' }
      }]
    });

    // QLR - S√† lan trips
    const chartQlrBarge = echarts.init(document.getElementById('chart-qlr-barge'));
    chartQlrBarge.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.75)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { data: ['Cont', 'Th·ªùi gian (ph√∫t)'], textStyle: { fontSize: 10, color: '#9ca3af' } },
      grid: { left: '3%', right: '8%', bottom: '3%', top: '18%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['SL-01', 'SL-02', 'SL-03'],
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } }
      },
      yAxis: [
        { type: 'value', name: 'Cont', axisLabel: { fontSize: 10, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { lineStyle: { color: 'rgba(255,255,255,0.03)' } } },
        { type: 'value', name: 'Ph√∫t', axisLabel: { fontSize: 10, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { show: false } }
      ],
      series: [
        { name: 'Cont', type: 'bar', data: [86, 72, 54], itemStyle: { color: '#38bdf8' } },
        { name: 'Th·ªùi gian (ph√∫t)', type: 'line', yAxisIndex: 1, data: [80, 95, 80], itemStyle: { color: '#60a5fa' } }
      ]
    });

    // QLR - ƒê·∫ßu k√©o (horizontal bar)
    const chartQlrTractor = echarts.init(document.getElementById('chart-qlr-tractor'));
    chartQlrTractor.setOption({
      tooltip: { backgroundColor: 'rgba(0,0,0,0.75)', textStyle: { fontSize: 11, color: '#ffffff' } },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '10%', containLabel: true },
      xAxis: {
        type: 'value',
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { show: false }
      },
      yAxis: {
        type: 'category',
        data: ['Kh√°c', 'KH-01', 'KH-02', 'KH-03'],
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } }
      },
      series: [{
        type: 'bar',
        data: [55, 46, 38, 24],
        barMaxWidth: 28,
        itemStyle: { color: '#38bdf8' }
      }]
    });

    // QLR - Re-handling
    const chartQlrRehandling = echarts.init(document.getElementById('chart-qlr-rehandling'));
    chartQlrRehandling.setOption({
      tooltip: { backgroundColor: 'rgba(0,0,0,0.75)', textStyle: { fontSize: 11, color: '#ffffff' } },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '10%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['D·ªçn t·∫ßng', 'Tr·∫£i b√£i', 'ƒê·∫£o v·ªã tr√≠'],
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } }
      },
      yAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } }
      },
      series: [{
        type: 'bar',
        data: [68, 54, 42],
        itemStyle: { color: '#f97373' },
        barMaxWidth: 36
      }]
    });

    // QLR - Equipment usage
    const chartQlrEquipment = echarts.init(document.getElementById('chart-qlr-equipment'));
    chartQlrEquipment.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.75)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { data: ['Gi·ªù ho·∫°t ƒë·ªông', 'L∆∞·ª£t n√¢ng'], textStyle: { fontSize: 11, color: '#9ca3af' } },
      grid: { left: '3%', right: '8%', bottom: '3%', top: '15%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['RS-01', 'RS-02', 'FL-03', 'RTG-01'],
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } }
      },
      yAxis: [
        { type: 'value', name: 'Gi·ªù', axisLabel: { fontSize: 10, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } } },
        { type: 'value', name: 'L∆∞·ª£t n√¢ng', axisLabel: { fontSize: 10, color: '#9ca3af' }, axisLine: { lineStyle: { color: '#1e293b' } }, splitLine: { show: false } }
      ],
      series: [
        { name: 'Gi·ªù ho·∫°t ƒë·ªông', type: 'bar', data: [5.2, 4.8, 3.1, 2.6], barMaxWidth: 36, itemStyle: { color: '#38bdf8' } },
        { name: 'L∆∞·ª£t n√¢ng', type: 'line', yAxisIndex: 1, data: [168, 154, 92, 74], itemStyle: { color: '#60a5fa' } }
      ]
    });

    // ==================== KT CHARTS (Khai th√°c) ====================
    
    // KT - Doanh thu - S·ªë l∆∞·ª£ng - Chi ph√≠ theo th·ªùi gian
    const chartKtRevenueTime = echarts.init(document.getElementById('chart-kt-revenue-time'));
    chartKtRevenueTime.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { show: false },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '8%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11'],
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } }
      },
      series: [
        {
          name: 'Doanh thu',
          type: 'bar',
          data: [35, 42, 38, 45, 50, 48, 42, 38, 35, 40, 38],
          itemStyle: { color: '#60a5fa' },
          barMaxWidth: 30
        },
        {
          name: 'Chi ph√≠',
          type: 'bar',
          data: [20, 25, 22, 28, 30, 25, 22, 20, 18, 22, 20],
          itemStyle: { color: '#facc15' },
          barMaxWidth: 30
        },
        {
          name: 'L·ª£i nhu·∫≠n',
          type: 'line',
          data: [50, 55, 48, 60, 65, 58, 52, 48, 45, 55, 70],
          smooth: true,
          lineStyle: { color: '#4ade80', width: 2 },
          itemStyle: { color: '#4ade80' },
          symbol: 'circle',
          symbolSize: 6
        }
      ]
    });

    // KT - So s√°nh doanh thu theo lo·∫°i khai th√°c (horizontal bar)
    const chartKtCompare = echarts.init(document.getElementById('chart-kt-compare'));
    chartKtCompare.setOption({
      tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' }, backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { show: false },
      grid: { left: '3%', right: '8%', bottom: '3%', top: '8%', containLabel: true },
      xAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } }
      },
      yAxis: {
        type: 'category',
        data: ['H√†ng r·ªùi', 'Cont H√†ng', 'Cont R·ªóng'],
        axisLabel: { fontSize: 11, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      series: [
        {
          name: 'Th√°ng tr∆∞·ªõc',
          type: 'bar',
          data: [30, 50, 65],
          itemStyle: { color: 'rgba(167, 139, 250, 0.4)' },
          barMaxWidth: 20
        },
        {
          name: 'Th√°ng hi·ªán t·∫°i',
          type: 'bar',
          data: [45, 40, 55],
          itemStyle: { color: '#a78bfa' },
          barMaxWidth: 20
        }
      ]
    });

    // KT - S·∫£n l∆∞·ª£ng v·∫≠n chuy·ªÉn S√† Lan
    const chartKtSalan = echarts.init(document.getElementById('chart-kt-salan'));
    chartKtSalan.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { show: false },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '8%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['container r·ªóng - 40', 'container h√†ng xu·∫•t - 20', 'container h√†ng xu·∫•t - 40'],
        axisLabel: { fontSize: 9, color: '#9ca3af', rotate: 0, interval: 0 },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } }
      },
      series: [{
        type: 'bar',
        data: [
          { value: 45, itemStyle: { color: '#60a5fa' } },
          { value: 35, itemStyle: { color: '#a78bfa' } },
          { value: 25, itemStyle: { color: '#c4b5fd' } }
        ],
        barMaxWidth: 50
      }]
    });

    // KT - S·∫£n l∆∞·ª£ng h√†ng r·ªùi
    const chartKtHangroi = echarts.init(document.getElementById('chart-kt-hangroi'));
    chartKtHangroi.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { data: ['T·ªïng s·ªë l∆∞·ª£ng'], textStyle: { fontSize: 10, color: '#9ca3af' }, top: 0 },
      grid: { left: '3%', right: '4%', bottom: '3%', top: '15%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['VI√äN N√âN G·ªñ', 'T√îN CU·ªòN', 'S·∫ÆT TH√âP', 'XI MƒÇNG', 'ƒê√Å, B·ªòT ƒê√Å', 'B√É BAY'],
        axisLabel: { fontSize: 9, color: '#9ca3af', rotate: 15, interval: 0 },
        axisLine: { lineStyle: { color: '#1e293b' } },
        axisTick: { show: false }
      },
      yAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#1e293b' } },
        splitLine: { lineStyle: { color: 'rgba(255,255,255,0.04)' } }
      },
      series: [{
        name: 'T·ªïng s·ªë l∆∞·ª£ng',
        type: 'bar',
        data: [56, 48, 32, 24, 16, 8],
        itemStyle: {
          color: function(params) {
            const colors = ['#a78bfa', '#8b5cf6', '#7c3aed', '#6d28d9', '#5b21b6', '#4c1d95'];
            return colors[params.dataIndex];
          }
        },
        barMaxWidth: 40
      }]
    });

    // ==================== KT REPAIR CHARTS (S·ª≠a ch·ªØa thi·∫øt b·ªã) ====================
    
    // KT Repair - S·ªë l·∫ßn s·ª≠a ch·ªØa v√† chi ph√≠ theo th·ªùi gian
    const chartKtRepairTrend = echarts.init(document.getElementById('chart-kt-repair-trend'));
    chartKtRepairTrend.setOption({
      tooltip: { trigger: 'axis', backgroundColor: 'rgba(0,0,0,0.85)', textStyle: { fontSize: 11, color: '#ffffff' } },
      legend: { show: false },
      grid: { left: '8%', right: '8%', bottom: '8%', top: '8%', containLabel: true },
      xAxis: {
        type: 'category',
        data: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12', 'T1'],
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { lineStyle: { color: '#e5e7eb' } },
        axisTick: { show: false }
      },
      yAxis: [
        {
          type: 'value',
          name: 'S·ªë l·∫ßn',
          position: 'left',
          axisLabel: { fontSize: 10, color: '#9ca3af' },
          axisLine: { show: false },
          splitLine: { lineStyle: { color: '#f3f4f6' } }
        },
        {
          type: 'value',
          name: 'Chi ph√≠ (‚Ç´)',
          position: 'right',
          axisLabel: { fontSize: 10, color: '#9ca3af', formatter: '{value}' },
          axisLine: { show: false },
          splitLine: { show: false }
        }
      ],
      series: [
        {
          name: 'S·ªë l·∫ßn s·ª≠a ch·ªØa',
          type: 'bar',
          data: [92, 98, 105, 95, 110, 108, 115, 102, 98, 112, 120, 95],
          itemStyle: { color: '#ef4444', borderRadius: [4, 4, 0, 0] },
          barMaxWidth: 24
        },
        {
          name: 'Chi ph√≠',
          type: 'line',
          yAxisIndex: 1,
          data: [2.0, 2.2, 2.1, 2.3, 2.4, 2.3, 2.5, 2.2, 2.1, 2.4, 2.6, 2.5],
          smooth: true,
          lineStyle: { color: '#f97316', width: 3 },
          itemStyle: { color: '#f97316' },
          symbol: 'circle',
          symbolSize: 6
        }
      ]
    });

    // KT Repair - T·ª∑ tr·ªçng lo·∫°i s·ª≠a ch·ªØa (Pie chart)
    const chartKtRepairType = echarts.init(document.getElementById('chart-kt-repair-type'));
    chartKtRepairType.setOption({
      tooltip: { 
        trigger: 'item', 
        backgroundColor: 'rgba(0,0,0,0.85)', 
        textStyle: { fontSize: 11, color: '#ffffff' },
        formatter: '{b}: {c} ({d}%)'
      },
      legend: { 
        orient: 'horizontal', 
        bottom: '5%', 
        left: 'center',
        textStyle: { fontSize: 10, color: '#6b7280' },
        itemWidth: 12,
        itemHeight: 12
      },
      series: [
        {
          name: 'Lo·∫°i s·ª≠a ch·ªØa',
          type: 'pie',
          radius: ['45%', '70%'],
          center: ['50%', '45%'],
          avoidLabelOverlap: true,
          itemStyle: {
            borderRadius: 8,
            borderColor: '#fff',
            borderWidth: 2
          },
          label: {
            show: true,
            fontSize: 13,
            fontWeight: 'bold',
            color: '#1f2937',
            formatter: function(params) {
              return params.percent.toFixed(1) + '%';
            },
            position: 'inside'
          },
          emphasis: {
            label: {
              show: true,
              fontSize: 15,
              fontWeight: 'bold'
            },
            itemStyle: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
          },
          data: [
            { 
              value: 61.42, 
              name: 'Ph√°t sinh', 
              itemStyle: { color: '#ef4444' },
              label: { color: '#ffffff' }
            },
            { 
              value: 25.2, 
              name: 'B·∫£o tr√¨ ƒë·ªãnh k·ª≥', 
              itemStyle: { color: '#3b82f6' },
              label: { color: '#ffffff' }
            },
            { 
              value: 13.38, 
              name: 'B·∫£o d∆∞·ª°ng', 
              itemStyle: { color: '#10b981' },
              label: { color: '#ffffff' }
            }
          ]
        }
      ]
    });

    // KT Repair - Top l·ªói c·∫ßn s·ª≠a ch·ªØa (Horizontal bar)
    const chartKtTopErrors = echarts.init(document.getElementById('chart-kt-top-errors'));
    chartKtTopErrors.setOption({
      tooltip: { 
        trigger: 'axis', 
        axisPointer: { type: 'shadow' }, 
        backgroundColor: 'rgba(0,0,0,0.85)', 
        textStyle: { fontSize: 11, color: '#ffffff' } 
      },
      grid: { left: '25%', right: '8%', bottom: '3%', top: '3%', containLabel: false },
      xAxis: {
        type: 'value',
        axisLabel: { fontSize: 10, color: '#9ca3af' },
        axisLine: { show: false },
        splitLine: { lineStyle: { color: '#f3f4f6' } }
      },
      yAxis: {
        type: 'category',
        data: ['B·∫£o tr√¨ ƒë·ªãnh k·ª≥', 'Th√°o l·∫Øp c·ªß', 'H·ªèng b∆°m n∆∞·ªõc', 'L·ªói b·ªô ph·∫≠n', 'Thay piston', 'H·ªèng h·ªá th·ªëng ƒëi·ªán', 'R√≤ r·ªâ d·∫ßu th·ªßy l·ª±c', 'Thay l·ªçc gi√≥'],
        axisLabel: { fontSize: 10, color: '#6b7280' },
        axisLine: { show: false },
        axisTick: { show: false },
        inverse: true
      },
      series: [{
        type: 'bar',
        data: [
          { value: 32, itemStyle: { color: '#ef4444', borderRadius: [0, 4, 4, 0] } },
          { value: 28, itemStyle: { color: '#f97316', borderRadius: [0, 4, 4, 0] } },
          { value: 24, itemStyle: { color: '#fb923c', borderRadius: [0, 4, 4, 0] } },
          { value: 18, itemStyle: { color: '#fbbf24', borderRadius: [0, 4, 4, 0] } },
          { value: 16, itemStyle: { color: '#fde047', borderRadius: [0, 4, 4, 0] } },
          { value: 12, itemStyle: { color: '#a3e635', borderRadius: [0, 4, 4, 0] } },
          { value: 10, itemStyle: { color: '#4ade80', borderRadius: [0, 4, 4, 0] } },
          { value: 8, itemStyle: { color: '#10b981', borderRadius: [0, 4, 4, 0] } }
        ],
        barMaxWidth: 18,
        label: {
          show: true,
          position: 'right',
          fontSize: 10,
          color: '#6b7280',
          fontWeight: 600
        }
      }]
    });

    // Responsive
    window.addEventListener('resize', () => {
      chartRevenueOverview.resize();
      chartKpiComparison.resize();
      // MnR new charts
      chartMnrRevenueTime.resize();
      chartMnrPie.resize();
      chartMnrGauge.resize();
      chartMnrPending.resize();
      chartMnrInventory.resize();
      // QLR charts
      qlrSparkCharts.forEach(c => c.resize());
      chartQlrInoutHour.resize();
      chartQlrHeatmap.resize();
      chartQlrCarrierNew.resize();
      chartQlrBarge.resize();
      chartQlrTractor.resize();
      chartQlrRehandling.resize();
      chartQlrEquipment.resize();
      // KT charts
      chartKtRevenueTime.resize();
      chartKtCompare.resize();
      chartKtSalan.resize();
      chartKtHangroi.resize();
      // KT repair charts
      chartKtRepairTrend.resize();
      chartKtRepairType.resize();
      chartKtTopErrors.resize();
    });
  </script>
</body>
</html>

